---
title: UI & Text
description: Text rendering and UI layout components in ESEngine
---

import { Aside } from '@astrojs/starlight/components';

The `Text` and `UIRect` components work together with `Sprite` to render text in your game. The `TextPlugin` automatically converts text content into textures each frame.

## Setup

In the scene editor: create an entity → add `LocalTransform`, `Sprite`, `Text`, and `UIRect` components.

- **Text** — defines the text content and style (font, size, color, alignment)
- **UIRect** — defines the layout rectangle (size, anchor, pivot)
- **Sprite** — used internally by the text system to display the rendered texture

<Aside type="note">
  You don't need to configure the Sprite component manually. The `TextPlugin` automatically creates and updates the sprite texture from the Text content.
</Aside>

## Text Properties

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `content` | string | `''` | Text content to display |
| `fontFamily` | string | `'Arial'` | Font family name |
| `fontSize` | number | `24` | Font size in pixels |
| `color` | Color | `{r:1, g:1, b:1, a:1}` | Text color RGBA (0–1) |
| `align` | TextAlign | `Left` | Horizontal alignment |
| `verticalAlign` | TextVerticalAlign | `Top` | Vertical alignment |
| `wordWrap` | boolean | `true` | Enable automatic word wrapping |
| `overflow` | TextOverflow | `Visible` | Overflow handling mode |
| `lineHeight` | number | `1.2` | Line height multiplier |

## UIRect Properties

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `size` | Vec2 | `{100, 100}` | Width and height of the UI rectangle |
| `anchor` | Vec2 | `{0.5, 0.5}` | Anchor point (0–1 range) |
| `pivot` | Vec2 | `{0.5, 0.5}` | Pivot point for rotation and scaling |

## Enums

### TextAlign

| Value | Name | Description |
|-------|------|-------------|
| 0 | `Left` | Align text to the left edge |
| 1 | `Center` | Center text horizontally |
| 2 | `Right` | Align text to the right edge |

### TextVerticalAlign

| Value | Name | Description |
|-------|------|-------------|
| 0 | `Top` | Align text to the top |
| 1 | `Middle` | Center text vertically |
| 2 | `Bottom` | Align text to the bottom |

### TextOverflow

| Value | Name | Description |
|-------|------|-------------|
| 0 | `Visible` | Text overflows the rectangle boundary |
| 1 | `Clip` | Text is clipped at the boundary |
| 2 | `Ellipsis` | Truncated text shows "..." |

## Modifying Text at Runtime

To update text content or style during gameplay, query the `Text` component with `Mut()`:

```typescript
import { defineSystem, addSystem, Query, Mut } from 'esengine';
import { Text } from 'esengine';

addSystem(defineSystem(
    [Query(Mut(Text))],
    (query) => {
        for (const [entity, text] of query) {
            text.content = 'Updated!';
            text.fontSize = 32;
        }
    }
));
```

<Aside type="caution">
  Always use `Mut(Text)` when modifying text properties. Without `Mut()`, the component is read-only.
</Aside>

## Example: Dynamic Scoreboard

A common pattern is a score display that updates when a value changes:

```typescript
import { defineComponent, defineTag, defineSystem, addSystem, Query, Mut } from 'esengine';
import { Text } from 'esengine';

const ScoreDisplay = defineTag('ScoreDisplay');

const GameState = defineComponent('GameState', {
    score: 0,
});

addSystem(defineSystem(
    [Query(Mut(Text), ScoreDisplay), Query(GameState)],
    (displayQuery, stateQuery) => {
        let score = 0;
        for (const [, state] of stateQuery) {
            score = state.score;
        }
        for (const [, text] of displayQuery) {
            text.content = `Score: ${score}`;
        }
    }
));
```

In the editor: create a text entity with `Text`, `UIRect`, `Sprite`, `LocalTransform`, and the `ScoreDisplay` tag.

## UIMask

`UIMask` clips child entities to the parent entity's `UIRect` bounds. Any child that extends beyond the rectangle is visually cropped.

**Setup:** Add `UIMask`, `UIRect`, and `LocalTransform` to the parent entity. All child entities (and their descendants) will be clipped to this rectangle.

<Aside type="note">
  `UIMaskPlugin` is registered automatically by `createWebApp()`. No manual setup is needed.
</Aside>

### UIMask Properties

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `enabled` | boolean | `true` | Whether clipping is active |

### Nesting

When a child entity also has `UIMask`, its clip rectangle is the intersection of its own `UIRect` and the parent's clip rect. This allows nested scroll areas or layered clipping.

<Aside type="caution">
  `UIMask` only clips **child** entities — the entity with UIMask itself is not clipped.
</Aside>

### Example: Scrollable List

Create a mask container, then move child entities to scroll:

```typescript
import { defineSystem, addSystem, Res, Input, Query, Mut, LocalTransform, Children } from 'esengine';
import { UIMask } from 'esengine';
import { ScrollList } from './components';

addSystem(defineSystem(
    [Res(Input), Query(Children, UIMask, ScrollList), Query(Mut(LocalTransform))],
    (input, maskQuery, childQuery) => {
        for (const [entity, children, mask, scroll] of maskQuery) {
            const scrollDelta = input.getScrollDelta();
            for (const child of children.entities) {
                const [, transform] = childQuery.get(child);
                transform.position.y += scrollDelta * 20;
            }
        }
    }
));
```

## Next Steps

- [Components](/microes/core-concepts/components/) — all builtin components
- [Sprite](/microes/guides/sprite/) — sprite rendering details
- [Bitmap Text](/microes/guides/bitmap-text/) — GPU-rendered bitmap font text
- [Asset Loading](/microes/guides/assets/) — loading textures and other assets
