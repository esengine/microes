---
title: UI & Text
description: Text rendering and UI layout components in ESEngine
---

import { Aside } from '@astrojs/starlight/components';

The `Text` and `UIRect` components work together with `Sprite` to render text in your game. The `TextPlugin` automatically converts text content into textures each frame.

## Setup

In the scene editor: create an entity → add `LocalTransform`, `Sprite`, `Text`, and `UIRect` components.

- **Text** — defines the text content and style (font, size, color, alignment)
- **UIRect** — defines the layout rectangle (size, anchor, pivot)
- **Sprite** — used internally by the text system to display the rendered texture

<Aside type="note">
  You don't need to configure the Sprite component manually. The `TextPlugin` automatically creates and updates the sprite texture from the Text content.
</Aside>

## Text Properties

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `content` | string | `''` | Text content to display |
| `fontFamily` | string | `'Arial'` | Font family name |
| `fontSize` | number | `24` | Font size in pixels |
| `color` | Color | `{r:1, g:1, b:1, a:1}` | Text color RGBA (0–1) |
| `align` | TextAlign | `Left` | Horizontal alignment (editor defaults to `Center`) |
| `verticalAlign` | TextVerticalAlign | `Top` | Vertical alignment (editor defaults to `Middle`) |
| `wordWrap` | boolean | `true` | Enable automatic word wrapping |
| `overflow` | TextOverflow | `Visible` | Overflow handling mode |
| `lineHeight` | number | `1.2` | Line height multiplier |

## UIRect Properties

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `anchorMin` | Vec2 | `{0.5, 0.5}` | Bottom-left anchor relative to parent (0–1 range) |
| `anchorMax` | Vec2 | `{0.5, 0.5}` | Top-right anchor relative to parent (0–1 range) |
| `offsetMin` | Vec2 | `{0, 0}` | Pixel offset from anchorMin |
| `offsetMax` | Vec2 | `{0, 0}` | Pixel offset from anchorMax |
| `size` | Vec2 | `{100, 100}` | Width and height (used when anchorMin equals anchorMax) |
| `pivot` | Vec2 | `{0.5, 0.5}` | Pivot point for rotation and scaling |

When `anchorMin` equals `anchorMax`, the element has a fixed `size` positioned at the anchor point. When they differ, the element stretches between the two anchors and `size` is computed automatically by `UILayoutPlugin`.

## Enums

### TextAlign

| Value | Name | Description |
|-------|------|-------------|
| 0 | `Left` | Align text to the left edge |
| 1 | `Center` | Center text horizontally |
| 2 | `Right` | Align text to the right edge |

### TextVerticalAlign

| Value | Name | Description |
|-------|------|-------------|
| 0 | `Top` | Align text to the top |
| 1 | `Middle` | Center text vertically |
| 2 | `Bottom` | Align text to the bottom |

### TextOverflow

| Value | Name | Description |
|-------|------|-------------|
| 0 | `Visible` | Text overflows the rectangle boundary |
| 1 | `Clip` | Text is clipped at the boundary |
| 2 | `Ellipsis` | Truncated text shows "..." |

## Modifying Text at Runtime

To update text content or style during gameplay, query the `Text` component with `Mut()`:

```typescript
import { defineSystem, addSystem, Query, Mut } from 'esengine';
import { Text } from 'esengine';

addSystem(defineSystem(
    [Query(Mut(Text))],
    (query) => {
        for (const [entity, text] of query) {
            text.content = 'Updated!';
            text.fontSize = 32;
        }
    }
));
```

<Aside type="caution">
  Always use `Mut(Text)` when modifying text properties. Without `Mut()`, the component is read-only.
</Aside>

## Example: Dynamic Scoreboard

A common pattern is a score display that updates when a value changes:

```typescript
import { defineComponent, defineTag, defineSystem, addSystem, Query, Mut } from 'esengine';
import { Text } from 'esengine';

const ScoreDisplay = defineTag('ScoreDisplay');

const GameState = defineComponent('GameState', {
    score: 0,
});

addSystem(defineSystem(
    [Query(Mut(Text), ScoreDisplay), Query(GameState)],
    (displayQuery, stateQuery) => {
        let score = 0;
        for (const [, state] of stateQuery) {
            score = state.score;
        }
        for (const [, text] of displayQuery) {
            text.content = `Score: ${score}`;
        }
    }
));
```

In the editor: create a text entity with `Text`, `UIRect`, `Sprite`, `LocalTransform`, and the `ScoreDisplay` tag.

## UIMask

`UIMask` clips child entities to the parent entity's `UIRect` bounds. Any child that extends beyond the rectangle is visually cropped.

**Setup:** Add `UIMask`, `UIRect`, and `LocalTransform` to the parent entity. All child entities (and their descendants) will be clipped to this rectangle.

<Aside type="note">
  `UIMaskPlugin` is registered automatically by `createWebApp()`. No manual setup is needed.
</Aside>

### UIMask Properties

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `enabled` | boolean | `true` | Whether clipping is active |

### Nesting

When a child entity also has `UIMask`, its clip rectangle is the intersection of its own `UIRect` and the parent's clip rect. This allows nested scroll areas or layered clipping.

<Aside type="caution">
  `UIMask` only clips **child** entities — the entity with UIMask itself is not clipped.
</Aside>

### Example: Scrollable List

Create a mask container, then move child entities to scroll:

```typescript
import { defineSystem, addSystem, Res, Input, Query, Mut, LocalTransform, Children } from 'esengine';
import { UIMask } from 'esengine';
import { ScrollList } from './components';

addSystem(defineSystem(
    [Res(Input), Query(Children, UIMask, ScrollList), Query(Mut(LocalTransform))],
    (input, maskQuery, childQuery) => {
        for (const [entity, children, mask, scroll] of maskQuery) {
            const scroll = input.getScrollDelta();
            for (const child of children.entities) {
                const [, transform] = childQuery.get(child);
                transform.position.y += scroll.y * 20;
            }
        }
    }
));
```

## UI Interaction

ESEngine provides a built-in UI interaction system for handling hover, press, and click events on UI elements.

### Setup

Add the `Interactable` component to any UI entity with `UIRect` and `LocalTransform`. The `UIInteractionPlugin` (registered automatically by `createWebApp()`) performs hit testing each frame and manages interaction state.

### Interactable

Marks an entity as interactive.

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `enabled` | boolean | `true` | Whether interaction is enabled |

### Button

Adds a state machine on top of `Interactable` with optional color transitions.

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `state` | ButtonState | `Normal` | Current button state (read-only at runtime) |
| `transition` | ButtonTransition \| null | `null` | Color transition configuration |

**ButtonState:** `Normal` (0), `Hovered` (1), `Pressed` (2), `Disabled` (3)

When `transition` is set, the `Sprite` color is automatically updated on state change:

```typescript
import { Button, Interactable } from 'esengine';

world.insert(entity, Button, {
    state: 0,
    transition: {
        normalColor: { r: 1, g: 1, b: 1, a: 1 },
        hoveredColor: { r: 0.9, g: 0.9, b: 0.9, a: 1 },
        pressedColor: { r: 0.7, g: 0.7, b: 0.7, a: 1 },
        disabledColor: { r: 0.5, g: 0.5, b: 0.5, a: 0.5 },
    },
});
```

### UIInteraction

Automatically added by the plugin to entities with `Interactable`. Provides per-entity state:

| Property | Type | Description |
|----------|------|-------------|
| `hovered` | boolean | Pointer is over this entity |
| `pressed` | boolean | Entity is being pressed |
| `justPressed` | boolean | Press started this frame |
| `justReleased` | boolean | Press released this frame |

### UIEvents

The `UIEvents` resource collects interaction events each frame. Query it in systems:

```typescript
import { defineSystem, addSystem, Res } from 'esengine';
import { UIEvents } from 'esengine';

addSystem(defineSystem(
    [Res(UIEvents)],
    (events) => {
        for (const e of events.query('click')) {
            console.log('Clicked entity:', e.entity);
        }
    }
));
```

**Event types:** `click`, `press`, `release`, `hover_enter`, `hover_exit`, `submit`, `change`

### ScreenSpace

A tag component for root UI entities. Entities with `ScreenSpace`, `UIRect`, and `LocalTransform` are laid out relative to the camera bounds by `UILayoutPlugin`.

```typescript
import { ScreenSpace, UIRect, LocalTransform } from 'esengine';

world.insert(entity, ScreenSpace);
world.insert(entity, UIRect, {
    anchorMin: { x: 0, y: 0 },
    anchorMax: { x: 1, y: 1 },
    offsetMin: { x: 0, y: 0 },
    offsetMax: { x: 0, y: 0 },
    size: { x: 100, y: 100 },
    pivot: { x: 0.5, y: 0.5 },
});
```

<Aside type="note">
  Both `UILayoutPlugin` and `UIInteractionPlugin` are registered automatically by `createWebApp()`. No manual setup is needed.
</Aside>

## TextInput

`TextInput` renders an editable text field. The `TextInputPlugin` handles keyboard input, cursor blinking, and texture rendering automatically.

### Setup

In the editor: create an entity via right-click → **Create** → **UI** → **TextInput**, or manually add `LocalTransform`, `UIRect`, `Interactable`, and `TextInput` components.

<Aside type="note">
  The plugin automatically adds a `Sprite` component if missing — no manual setup needed. `TextInputPlugin` is registered automatically by `createWebApp()`.
</Aside>

### TextInput Properties

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `value` | string | `''` | Current text content |
| `placeholder` | string | `''` | Hint text shown when empty |
| `placeholderColor` | Color | `{r:0.6, g:0.6, b:0.6, a:1}` | Placeholder text color |
| `fontFamily` | string | `'Arial'` | Font family name |
| `fontSize` | number | `16` | Font size in pixels |
| `color` | Color | `{r:1, g:1, b:1, a:1}` | Text color |
| `backgroundColor` | Color | `{r:0.15, g:0.15, b:0.15, a:1}` | Background fill color |
| `padding` | number | `6` | Padding in pixels |
| `maxLength` | number | `0` | Max characters (0 = unlimited) |
| `multiline` | boolean | `false` | Allow multi-line input |
| `password` | boolean | `false` | Mask text with bullets |
| `readOnly` | boolean | `false` | Prevent user input |

The `focused`, `cursorPos`, and `dirty` properties are managed internally by the plugin.

### Reading Input at Runtime

```typescript
import { defineSystem, addSystem, Query, Res } from 'esengine';
import { TextInput, UIEvents } from 'esengine';

addSystem(defineSystem(
    [Query(TextInput), Res(UIEvents)],
    (query, events) => {
        for (const e of events.query('submit')) {
            const [, input] = query.get(e.entity);
            console.log('Submitted:', input.value);
        }
    }
));
```

**TextInput events:** `change` (value changed), `submit` (Enter pressed in single-line mode)

## Next Steps

- [Components](/microes/core-concepts/components/) — all builtin components
- [Sprite](/microes/guides/sprite/) — sprite rendering details
- [Bitmap Text](/microes/guides/bitmap-text/) — GPU-rendered bitmap font text
- [Asset Loading](/microes/guides/assets/) — loading textures and other assets
